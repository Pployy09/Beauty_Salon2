<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    
    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css">
    
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&family=Noto+Sans+Thai:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Pacifico&family=Raleway:wght@200&display=swap" rel="stylesheet">
      
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    -->
    
</head>
<body>
  <!-- Header -->
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-4 ">
        <div class="col-md-3 mb-2 mb-md-0 ">
          <div class="fontlogo logomore"><%=home.inputLogo%></div>
        </div>
    
        <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0 ">
          <li><a href="./home-user" class="nav-link px-3 heaDer fontAll ">หน้าแรก</a></li>
          <li><a href="./booking-user" class="active nav-link px-3 heaDer fontAll">การจองคิว</a></li>
          <li><a href="./service-user" class="nav-link px-3 heaDer fontAll">บริการของร้าน</a></li>
          <li><a href="./contact-user" class="nav-link px-3 heaDer fontAll">ติดต่อ</a></li>
          
        </ul>
    
        <% if (loggedIn) { %>
          <div class=" nav me-3 text-end">
            <div><a href="./information-user" class=" nav-link px-3 heaDer fontAll">Hi, <%=UserData.username%></a></div>
            <div><a href="./logout" class="btn btn-danger">ออกจากระบบ</a></div>
          </div>
          <% } %>
      
          <% if (!loggedIn) { %>
            <div class=" nav me-3 text-end">
              <div><a href="./login-user" class="nav-link fontAll heaDer login">เข้าสู่ระบบ</a></div>
              <div><a href="./register" class="nav-link fontAll heaDer login">สมัครสมาชิก</a></div>
            </div>
            <% } %>

        </header>

    <!--การจองคิว-->    
    <section  id="booking">
      
        <div class="container">
              <h3 class="Bookingg fontAll">จองคิว</h3>
              <div class=" table-booking"></div>
        
              
            <form action="/booking-user/" method="POST" >
              
              <div class="mt-5 date-booking ">
                <label for="dateBooking" 
                class="form-label fontAll textBooking">เลือกวันที่</label>
                <input id="dateBooking"
                type="date" min="0000-00-00" max="0000-00-00"
                placeholder="วว/ดด/ปปปป" 
                class="form-control" 
                name="booking_date_user" 
                required >
              </div>

           
              <div class="mt-3 choose-service">
                <label for="chooseServiceUser" 
                class="form-label fontAll textBooking">เลือกบริการ</label>

                <select name="booking_service_user" id="customSelect" class="custom-select-service" required>
                   <% var serT = [] ; %>
                  <% ServiceDataList.forEach(serviceData =>{ %> 
                    <option  value= " <%= serviceData.service_name  %> " class="fontAll" > 
                      <% const se = serviceData.service_time %> <%= serviceData.service_name %> ( <%= serviceData.service_price  %> บาท )  
                    </option>
                    <% serT.push(se); %>
                    
                    <% }); %> 
                </select>
               
                 
                   <!--   <div class="select">
                    <% ServiceDataList.forEach(serviceData =>{ %> 
                      <div class="item"><%= serviceData.service_name %> ( <%= serviceData.service_price  %> บาท )</div>
                    <% }) %> 
                   </div>
                  -->
              </div>

          
              <div class="mt-3 choose-time">
                <label for="timeBooking" 
                class="form-label fontAll textBooking">เลือกเวลา</label>

                
                    
                   
                     
                    
               
                     <select name="booking_time_user[]"  class="select-time"  id="select-time"  multiple="multiple" required > 
                            
                           <%  HomeData.forEach(homeData => { %>
                           
                            <%  let timeOpen = parseInt(homeData.time_open); %>
                            <%  let timeForService1  = timeOpen+1;  %>
                            <%  let timeClose = parseInt(homeData.time_close); %>
                           
                            
                                <% for( ; timeOpen < timeClose  ; timeOpen++ ) { %> 
                                    <% if(timeOpen<=9) {%> 
                                      
                                      <option  value= "0<%= timeOpen %>.00 - <%= timeForService1 %>.00"  class="fontAll "> 0<%= timeOpen %>.00 - <%= timeForService1 %>.00 </option>
                                      
                                    <% timeForService1++ %> 
                                    <% }else{ %>   
                                      <option  value= "<%= timeOpen %>.00 - <%= timeForService1 %>.00"  class="fontAll "> <%= timeOpen %>.00 - <%= timeForService1 %>.00 </option> 
                                      <% timeForService1++ %> 
                                    <% } %>
                                
                                <% } %>
                               
                             
                        <% })  %> 
                          
                        
                      
                        
                    </select> 

                    
                  
                
                  
              </div>

              <div class="bookingNow2">
                <button type="bookingNow" class="btn fontAll">จองคิว</button>
              </div>
            </form>
         
       </div>
       
    </section>
 
  <%- include ('./footer') %>

  <%- include ('./chat') %>

  <!-- JavaScript-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" 
    crossorigin="anonymous">
  </script>

  <script 
  src="/js/dateBooking.js" 
  charset="utf-8">
  </script>
  <script 
  src="/js/booking-user.js" 
  charset="utf-8">
  </script>
  <script  
  src="/js/select-time.js" 
  charset="utf-8">
  </script>

  <script>
    
    var itemS =  [];
    var timeService = '<%= serT %>'.split(',');
    var item = document.getElementsByClassName("item-service");
    for(let i = 0; i < item.length ; i++){
      itemS.push('itemService'+[i]);
      
      var itemServiceNum = itemS[i];
      var itemService = document.getElementById(itemServiceNum);
      
      itemService.onclick = (event) =>{
           alert("เลือกเวลาได้ " + timeService[i] + " ชั่วโมง ")
        
        };
     
     }
     
  </script>
  

</body>
</html>